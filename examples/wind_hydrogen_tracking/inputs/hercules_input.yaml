# Name
name: wind_hydrogen_tracking

###
# Describe this emulator setup
description: Wind standin plant using FLORIS plus electrolyzer plant plus a wind controller to follow a hydrogen reference signal

dt: 0.5
starttime_utc: "2018-05-10T12:31:00.00Z"
endtime_utc: "2018-05-10T12:41:00.00Z"
verbose: False

plant:
  interconnect_limit: 0

wind_farm:
  component_type: Wind_MesoToPowerPrecomFloris
  floris_input_file: ../simple_hybrid_plant/inputs/floris_input.yaml
  wind_input_filename: inputs/amr_standin_data.csv
  turbine_file_name: ../simple_hybrid_plant/inputs/turbine_filter_model.yaml
  log_file_name: outputs/log_wind_sim.log
  log_channels:
    - power
    - turbine_powers
  floris_update_time_s: 300.0 # Update wakes every 5 minutes

electrolyzer: # The name of the py_sim object

  component_type: ElectrolyzerPlant
  general: 
    verbose: True # default
  initial_conditions:
    # Initial power input to electrolyzer 
    power_available_kw: 20000    
  electrolyzer:
    initialize: True 
    initial_power_kW: 20000
    supervisor:
      n_stacks: 40
      system_rating_MW: 40
    stack: 
      cell_type: PEM
      # Maximum current of Stack (A)
      max_current: 2000
      # Stack operating temperature (degC)
      temperature: 60
      # Number of Cells per Stack
      n_cells: 100
      # Stack rated power
      stack_rating_kW: 1000
      # Determines whether degradation is applied to the Stack operation
      include_degradation_penalty: False
    controller:
      # Controller type for electrolyzer plant operation
      control_type: PowerSharingRotation
  log_channels:
    - power
    - H2_output
    - H2_mfr
    - power_input_kw

controller:
  nominal_hydrogen_rate_kgps: 0.208 # Nominal hydrogen production rate for the plant in kg/s
  nominal_plant_power_kW: 45000
  hydrogen_controller_gain: 1.0


external_data:
  external_data_file: inputs/hydrogen_ref_signal.csv
